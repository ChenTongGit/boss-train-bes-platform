<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.boss.xtrain.permission.mapper.ResourceMapper" >
  <resultMap id="BaseResultMap" type="com.boss.xtrain.permission.pojo.entity.Resource" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 10:19:20 CST 2020.
    -->
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="module_detail_id" property="moduleDetailId" jdbcType="BIGINT" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="code" property="code" jdbcType="VARCHAR" />
    <result column="order_index" property="orderIndex" jdbcType="INTEGER" />
    <result column="parent_id" property="parentId" jdbcType="BIGINT" />
    <result column="url" property="url" jdbcType="VARCHAR" />
    <result column="open_img" property="openImg" jdbcType="VARCHAR" />
    <result column="close_img" property="closeImg" jdbcType="VARCHAR" />
    <result column="resource_type" property="resourceType" jdbcType="TINYINT" />
    <result column="leaf" property="leaf" jdbcType="TINYINT" />
    <result column="action" property="action" jdbcType="TINYINT" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="TINYINT" />
    <result column="created_by" property="createdBy" jdbcType="BIGINT" />
    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
    <result column="updated_by" property="updatedBy" jdbcType="BIGINT" />
    <result column="updated_time" property="updatedTime" jdbcType="TIMESTAMP" />
    <result column="version" property="version" jdbcType="BIGINT" />
  </resultMap>
  <sql id="ResourceColumns">
        tr.id,
        tr.name,
        tr.code,
        tr.status,
        tr.created_by as createdBy,
        tr.created_time as createdTime,
        tr.updated_time as updatedTime,
        tr.updated_by as updateBy,
        tr.version,
        tr.parent_id as parentId,
        tr.order_index as orderIndex,
        tr.resource_type as resourceType,
        tr.remark,
        tr.url,
        tr.leaf,
        tr.open_img as openImg,
        tr.close_img as closeImg,
        r.name AS parentName
  </sql>
  <select id="queryParent" resultType="com.boss.xtrain.permission.pojo.entity.Resource">
    select * from t_resource where leaf = 0
  </select>
  <select id="loadResourceByRoleId" parameterType="java.lang.String" resultType="java.lang.String">
    select a.url from t_resource a,t_role_resource b
    where a.id = b.t_rs_id and b.t_r_id = #{roleId} and a.resource_type = 0
  </select>
  <select id="getStateById" parameterType="java.lang.Long" resultType="com.boss.xtrain.permission.pojo.entity.Resource">
    select status from t_resource where id=#{id}
  </select>


</mapper>