<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.boss.xtrain.exam.dao.mapper.ExamPublishToUserMapper" >
  <resultMap id="BaseResultMap" type="com.boss.xtrain.exam.pojo.entity.ExamPublishToUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 07 18:01:22 CST 2020.
    -->
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="t_p_id" property="publishId" jdbcType="BIGINT" />
    <result column="t_u_id" property="markPeople" jdbcType="BIGINT" />
    <result column="status" property="status" jdbcType="TINYINT" />
    <result column="company_id" property="companyId" jdbcType="BIGINT" />
    <result column="org_id" property="organizationId" jdbcType="BIGINT" />
    <result column="created_by" property="createdBy" jdbcType="BIGINT" />
    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
    <result column="updated_by" property="updatedBy" jdbcType="BIGINT" />
    <result column="updated_time" property="updatedTime" jdbcType="TIMESTAMP" />
    <result column="version" property="version" jdbcType="BIGINT" />
  </resultMap>

  <delete id="deleteBatchByPublishIds" parameterType="list">
    delete from t_exam_publish_record_user where t_p_id in
    <foreach collection="ids" item="id" open="(" close=")" separator=",">
      #{id}
    </foreach>
  </delete>

  <delete id="deleteBatchByPublishId" parameterType="list">
    delete from t_exam_publish_record_user where t_p_id  = #{id}
  </delete>

  <insert id="insertBatch" parameterType="java.util.List">
    INSERT INTO t_exam_publish_record_user(id, t_p_id, t_u_id, org_id
    ,company_id, created_by, created_time, updated_by, updated_time, version)
    VALUES
    <foreach collection="examPublishToUsers" item="entity" index="index" separator=",">
      (
      #{entity.id},
      #{entity.publishId},
      #{entity.markPeople},
      #{entity.organizationId},
      #{entity.companyId},
      #{entity.createdBy},
      #{entity.createdTime},
      #{entity.updatedBy},
      #{entity.updatedTime},
      #{entity.version}
      )
    </foreach>
  </insert>

  <select id="queryMarkUsersByPublishId" parameterType="long" resultType="long">
    select t_u_id from t_exam_publish_record_user where t_p_id = #{publishId}
  </select>



</mapper>